# Дрон для добычи Space Enga

Данный репозиторий содержит `MiningDroneScript.cs` – простой скрипт C# для **Программируемого блока** в игре Space Engineers. Скрипт управляет автономным добывающим дроном, который летает между базой и точкой добычи. Когда груз почти заполнен или заряд батареи низкий, дрон возвращается на базу, выгружает руду и продолжает работу.

Скрипт рассчитан на небольшие корабли и демонстрирует работу автопилота, поэтому его можно использовать как основу для более сложных систем. Ниже приведены требования к построению дрона, а также рекомендации по настройке.

## Особенности
- Автоматический перелёт между двумя точками
- Базовое обнаружение препятствий с помощью передней камеры или сенсора
- Настройка пороговых значений через `Me.CustomData`

## Подготовка дрона
Перед использованием убедитесь, что у корабля есть базовые блоки управления и хранения. Минимальный набор приведён ниже. Вы можете переименовать блоки, изменив соответствующие строки в скрипте, но по умолчанию используются следующие имена:

- **Remote Control** – `RC`
- **Connector** – `Connector`
- **Cargo Container** – `Cargo`
- **Ship Drill** – `Drill`
- **Battery** – `Battery`

К носу дрона желательно прикрепить камеру или сенсор, чтобы скрипт мог обнаруживать препятствия на пути. Дальность проверки ограничена 50 метрами.

## Конфигурация
Поместите в поле Custom Data программируемого блока следующий блок INI. Все параметры имеют значения по умолчанию и могут быть изменены под конкретный корабль:

```
[Settings]
BaseGPS=GPS:Base:0:0:0:
MineGPS=GPS:Mine:100:0:0:
CargoFullPercent=0.9
BatteryThreshold=0.3
```

Описание параметров:

- **BaseGPS** – координаты точки базы или её GPS‑метка.
- **MineGPS** – координаты точки добычи.
- **CargoFullPercent** – доля заполнения грузовых контейнеров, при достижении которой дрон возвращается выгружаться.
- **BatteryThreshold** – минимальная доля заряда батарей, ниже которой скрипт также отправит корабль на базу.

`BaseGPS` и `MineGPS` могут задаваться как GPS‑строки, так и простыми координатами, разделёнными запятыми.

## Использование
1. Загрузите файл `MiningDroneScript.cs` в программируемый блок вашего корабля.
2. Подготовьте перечисленные выше блоки и убедитесь, что их имена совпадают с ожидаемыми. При желании можно изменить названия непосредственно в коде.
3. Вставьте блок конфигурации в поле **Custom Data** и, при необходимости, скорректируйте координаты и пороговые значения.
4. При наличии камеры или сенсора разместите их так, чтобы они "смотрели" вперёд по курсу корабля.
5. Запустите программу кнопкой `Run` или по таймеру. После старта дрон сам долетит до точки добычи, будет сверяться с датчиком заполнения грузовых контейнеров и уровнем заряда батареи.

Во время работы скрипта можно вручную отправить дрон на базу, передав в программируемый блок аргумент `dock`. Команда запустит последовательность стыковки и выгрузки руды.

## Ограничения
- Проверка препятствий производится только на расстоянии до 50 м и предполагает, что камера смотрит вперёд.
- При обнаружении препятствия точка маршрута не корректируется — дрон просто останавливается.
